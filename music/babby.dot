##Command to produce the output: "dot -Tpng thisfile > thisfile.png"

digraph HeterodyneAdder {
    graph [fontsize=15 splines=true overlap=false rankdir = "LR"];

    subgraph cluster_inputs {
        rank=same;
        node [shape=box];  a;b;c;
    }

    {node [shape=diamond,style=filled,fontcolor=white,fillcolor=blue,label="+",height=.3,width=.3];
        add01; add02; add03; add04; add05; add06;}
    {node [shape=diamond,style=filled,fontcolor=white,fillcolor=red,label="-",height=.3,width=.3];
        sub01; sub02; sub03; sub04;}
    {node [shape=circle fixedsize=true width=0.9 labeli="e"];e1;e2;e3;e4;}
    /*
    ** Build the I-adder
    */
    subgraph cluster_add_Is {
        subgraph cluster_chewed_Is {
            rank=same;
            node [shape=circle fixedsize=true width=0.9]; ai;bi;ci;
        }
        {rank=same; e1 -> add01;}
        ai -> add01 -> add03;
                 bi -> add03 -> add05 -> sub01;
                          ci -> add05;
        {rank=same; e3 -> sub01;}
    }
    /*
    ** Feed the input into it
    */

    a->ai;
    b->bi;
    c->ci;

    /*
    ** Build the V adder
    */
    subgraph cluster_add_Vs {
        subgraph cluster_chewed_Vs {
            rank=same;
            node [shape=circle fixedsize=true width=0.9]; av;bv;
        }
        {rank=same; e2 -> add02;}
        av -> add02 -> add04 -> add06 -> sub03;
                 bv -> add04;
        {rank=same; e4 -> sub03;}
        sub02->add06;
    }
    /*
    ** Feed the inputs into it
    */
    a->av;
    b->bv;
    /* Where does IIII come from? */
    IIII->sub02;

    /*
    ** Group the output
    */
    subgraph cluster_results {
        rank=same;
        Ri; Rv; Rc;
    }
    /*
    ** Extract the results into the output
    */
    sub01->Ri;
    sub01->Rc;
    sub03->Rv;
    Rc->sub02;

    overlap=false
    label="Harmonic Math"
    fontsize=24;
}
